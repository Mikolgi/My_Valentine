<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–î–ª—è —Ç–µ–±—è üíê</title>
    <link rel="stylesheet" href="css/theme.css" />
    <script src="config.js"></script>
    <style>
      body{ overflow-x:hidden; }
      .flowerField{
        position: fixed; inset: 0; z-index: 0; pointer-events:none;
        background:
          radial-gradient(18px 18px at 8% 86%, rgba(255,95,158,.22), transparent 60%),
          radial-gradient(16px 16px at 16% 78%, rgba(255,148,148,.22), transparent 60%),
          radial-gradient(22px 22px at 28% 92%, rgba(255,95,158,.18), transparent 60%),
          radial-gradient(18px 18px at 40% 80%, rgba(255,148,148,.22), transparent 60%),
          radial-gradient(20px 20px at 55% 90%, rgba(255,95,158,.18), transparent 60%),
          radial-gradient(16px 16px at 70% 82%, rgba(255,148,148,.22), transparent 60%),
          radial-gradient(22px 22px at 84% 92%, rgba(255,95,158,.18), transparent 60%),
          radial-gradient(18px 18px at 92% 78%, rgba(255,148,148,.22), transparent 60%),
          radial-gradient(1200px 600px at 50% 0%, #ffe3e1, #fff5e4);
        animation: drift 10s ease-in-out infinite alternate;
      }
      @keyframes drift{ from{ filter:saturate(1.05); transform:translateY(0);} to{ filter:saturate(1.18); transform:translateY(-10px);} }
      .content{ position: relative; z-index: 1; }
      .recap{ padding:16px 14px; margin-top:12px; text-align:left; border-radius:18px; background:rgba(255,255,255,.72); border:1px solid rgba(255,95,158,.20); }
      .recap h2{ margin:0 0 12px; font-size:18px; font-weight:1000; }
      .line{ display:flex; gap:10px; align-items:baseline; padding:9px 0; border-bottom:1px solid rgba(255,95,158,.10); }
      .line:last-child{ border-bottom:none; }
      .label{ width:118px; font-size:12px; color:rgba(47,34,34,.55); text-transform:uppercase; letter-spacing:.6px; flex:0 0 auto; }
      .val{ font-size:15px; font-weight:900; color:rgba(47,34,34,.88); }
      .loveNote{ margin-top:12px; font-size:14px; color:rgba(47,34,34,.70); }
    </style>
  </head>

  <body>
    <div class="flowerField"></div>

    <main class="wrap content">
      <section class="card" style="padding:18px 16px 22px;">
        <div class="title">–î–ª—è —Ç–µ–±—è ‚Äî –≤—Å–µ–≥–¥–∞ üíê</div>
        <p class="subtitle">–î–∞–∂–µ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ —Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –º–æ–π —Å–∞–º—ã–π –ª—é–±–∏–º—ã–π —á–µ–ª–æ–≤–µ–∫ ü§ç</p>

        <section class="recap">
          <h2>–ù–∞—à –ø–ª–∞–Ω ‚ú®</h2>
          <div class="line"><div class="label">–°–≤–∏–¥–∞–Ω–∏–µ</div><div class="val" id="r1">‚Äî</div></div>
          <div class="line"><div class="label">–°—Ü–µ–Ω–∞—Ä–∏–π</div><div class="val" id="rNote">‚Äî</div></div>
          <div class="line"><div class="label">–î–µ–Ω—å</div><div class="val" id="r2">‚Äî</div></div>
          <div class="line"><div class="label">–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</div><div class="val" id="r3">‚Äî</div></div>
          <div class="line"><div class="label">–°—é—Ä–ø—Ä–∏–∑</div><div class="val" id="r4">‚Äî</div></div>

          <div class="loveNote">–ù–∞–∂–º–∏ ‚Äú–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω‚Äù –∏ –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ üíñ</div>
        </section>

        <div style="margin-top:16px;">
          <button class="btn btnPrimary btnFull" id="shareBtn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à –ø–ª–∞–Ω üíå</button>
        </div>

        <div style="margin-top:10px;">
          <button class="btn btnGhost btnFull" id="finalBtn" onclick="location.href='index.html'">–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –º–æ—è –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞(–º–æ—è –¥–µ–≤—É—à–∫–∞ –≤–∞—â–µ—Ç–∞) üíó</button>
        </div>
      </section>
    </main>

    <script>
      const cfg = window.VALENTINE_CONFIG || {};

      // –û–Ω–ª–∞–π–Ω-—Å–≤–∏–¥–∞–Ω–∏–µ + —Ä—É–ª–µ—Ç–∫–∞/–∑–∞–º–µ—Ç–∫–∞
      const online = localStorage.getItem("online_choice") || "‚Äî";
      const note = localStorage.getItem("online_note") || "";

      // –î–µ–Ω—å
      const when = localStorage.getItem("online_when") || "–í –ª—é–±–æ–π –¥–µ–Ω—å";

      // –ù–æ–≤—ã–µ –∫–ª—é—á–∏ (–∏ –Ω–∞ –≤—Å—è–∫–∏–π ‚Äî —Å—Ç–∞—Ä—ã–µ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
      const mood =
        localStorage.getItem("mood_choice") ||
        localStorage.getItem("food_choice") ||
        "‚Äî";

      const surprise =
        localStorage.getItem("surprise_choice") ||
        localStorage.getItem("dessert_choice") ||
        localStorage.getItem("dessertChoice") ||
        "‚Äî";

      document.getElementById("r1").textContent = online;
      document.getElementById("rNote").textContent = note ? note : "‚Äî";
      document.getElementById("r2").textContent = when;
      document.getElementById("r3").textContent = mood;
      document.getElementById("r4").textContent = surprise;

      const shareBtn = document.getElementById("shareBtn");
      const finalBtn = document.getElementById("finalBtn");

      shareBtn.textContent = cfg.shareButtonText || shareBtn.textContent;
      finalBtn.textContent = cfg.finalButtonText || finalBtn.textContent;

      shareBtn.addEventListener("click", async () => {
        const msg =
`–ü–ª–∞–Ω –Ω–∞ –Ω–∞—à–µ —Å–≤–∏–¥–∞–Ω–∏–µ üíñ
–°–≤–∏–¥–∞–Ω–∏–µ: ${online}
–°—Ü–µ–Ω–∞—Ä–∏–π: ${note || "‚Äî"}
–î–µ–Ω—å: ${when}
–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: ${mood}
–°—é—Ä–ø—Ä–∏–∑: ${surprise}

${cfg.shareMessageFooter || ""}`.trim();

        try {
          await navigator.clipboard.writeText(msg);
          shareBtn.textContent = cfg.shareCopiedText || "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ ‚úÖ";
          setTimeout(() => (shareBtn.textContent = cfg.shareButtonText || "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à –ø–ª–∞–Ω üíå"), 2200);
        } catch {
          prompt("–°–∫–æ–ø–∏—Ä—É–π –∏ –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ:", msg);
        }
      });

      // –ö—Ä–∞—Å–∏–≤—ã–µ ‚Äú—Ü–≤–µ—Ç–æ—á–∫–∏‚Äù
      const icons = ["üå∏","üå∑","üíê","üå∫","‚ú®","üíñ","ü™ª","üåº"];
      for (let i = 0; i < 30; i++) {
        const h = document.createElement("div");
        h.className = "floatHeart";
        h.textContent = icons[Math.floor(Math.random() * icons.length)];
        h.style.left = Math.random() * 100 + "vw";
        h.style.fontSize = 14 + Math.random() * 22 + "px";
        h.style.animationDelay = Math.random() * 1.6 + "s";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 5000);
      }
    </script>
  </body>
</html>
